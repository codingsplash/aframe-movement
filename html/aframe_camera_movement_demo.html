<html>
<head>
  <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js'></script>
  <script src="../js/aframe.js"></script>
</head>
<body>
  <a-scene>
    <a-box position="0 0 -5" width="1" height="1" depth="1" color="#4CC3D9"></a-box>
    <a-box position="0 0 5"  width="1" height="1" depth="1" color="red"></a-box>
    <a-box position="-5 0 0"  width="1" height="1" depth="1" color="green"></a-box>
    <a-box position="5 0 0"  width="1" height="1" depth="1" color="yellow"></a-box>

    <a-sky color="#ECECEC"></a-sky>
    <a-entity camera look-controls position="0 0.1 0" id="cam"></a-entity>
  </a-scene>

</body>

<script>

$(function () {

  new_x = 0;
  new_z = 0;
  function move_camera_forward() {
    x = $("#cam").attr("position").x;
    y = $("#cam").attr("position").y;
    z = $("#cam").attr("position").z;
    radian = -($("#cam").attr("rotation").y) * (Math.PI / 180);
    new_z = (new_z + (0.1 * Math.cos(radian)));
    new_x = new_x + (0.1 * Math.sin(radian));
    new_pos = new_x + " " + y + " " + (-new_z);
    console.log(new_pos)
    $("#cam").attr("position", new_pos)
    
  }

  moving=false

  $("#cam").get(0).addEventListener('componentchanged', function (evt) {
    if(($("#cam").attr("rotation").x)>15 && !moving){
      timer1 = setInterval(move_camera_forward, 100);
      moving=true
    }
    if(($("#cam").attr("rotation").x)<-15 && moving){
      if(timer1!=undefined){
        clearTimeout(timer1);
        moving=false

      }
    }

  });


});


</script>

</html>
